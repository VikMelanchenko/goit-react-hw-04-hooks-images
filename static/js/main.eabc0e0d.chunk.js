(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{18:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),o=n(4),s=n.n(o),i=(n(18),n(3)),l=n(8);n(11),n(5);function u(e){var t=e.onSubmit,n=Object(r.useState)(""),a=Object(i.a)(n,2),o=a[0],s=a[1];return Object(c.jsx)("header",{className:"Searchbar",children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==o.trim()?(t(o),s("")):l.b.error("Please enter a valid query string")},className:"SearchForm",children:[Object(c.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(c.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(c.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,value:o,placeholder:"Search images and photos",onChange:function(e){s(e.target.value.toLowerCase())}})]})})}var j=n(10),b=n(12),m=n.n(b);n(40);function h(){return Object(c.jsx)(m.a,{className:"spinner",type:"ThreeDots",color:"#00BFFF",height:80,width:80})}var d={fetchImages:function(e,t){var n="https://pixabay.com/api/?&key=".concat("19112530-d5af3423794dd47ca2e19dee1","&q=").concat(e,"&page=").concat(t,"&image_type=photo&orientation=horizontal&per_page=12");return fetch(n).then((function(e){return e.ok?e.json():Promise.reject(new Error("Something went wrong"))})).then((function(e){return console.log(e),e.hits}))}};function g(e){var t=e.onClick;return Object(c.jsx)("div",{className:"load__button",children:Object(c.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load More"})})}var O=document.querySelector("#modal-root");function f(e){Object(r.useEffect)((function(){var t=function(t){"Escape"===t.code&&e.onClose()};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}));return Object(o.createPortal)(Object(c.jsx)("div",{className:"Overlay",onClick:function(t){t.target!==t.currentTarget&&e.onClose()},children:Object(c.jsx)("div",{className:"Modal",children:Object(c.jsx)("img",{src:e.src,alt:e.alt,width:900})})}),O)}function x(e){var t=e.src,n=e.alt,a=e.largeImageURL,o=Object(r.useState)(null),s=Object(i.a)(o,2),l=s[0],u=s[1],j=function(){u((function(e){return!e}))};return Object(c.jsxs)("li",{className:"ImageGalleryItem",onClick:j,children:[Object(c.jsx)("img",{src:t,alt:n,className:"ImageGalleryItem-image"}),l&&Object(c.jsx)(f,{onClose:j,src:a,alt:n})]})}function v(e){var t=e.images;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("ul",{className:"ImageGallery",children:t.map((function(e,t){return Object(c.jsx)(x,{id:t,src:e.webformatURL,largeImageURL:e.largeImageURL,alt:e.tags},e.id)}))})})}var p=n.p+"static/media/panda-dribble_4x.13bd5aac.webp";function y(e){var t=e.message;return Object(c.jsxs)("div",{role:"alert",style:{textAlign:"center"},children:[t,Object(c.jsx)("img",{src:p,width:"100%",alt:"crying girl",style:{textAlign:"center"}})]})}var w="idle",S="pending",N="resolved",k="rejected";function C(e){var t=e.query,n=Object(r.useState)([]),a=Object(i.a)(n,2),o=a[0],s=a[1],l=Object(r.useState)(w),u=Object(i.a)(l,2),b=u[0],m=u[1],O=Object(r.useState)(null),f=Object(i.a)(O,2),x=f[0],p=f[1],C=Object(r.useState)(1),I=Object(i.a)(C,2),F=I[0],E=I[1];Object(r.useEffect)((function(){t&&(m(S),L(),m(N))}),[t,F]),Object(r.useEffect)((function(){var e;e!==t&&(E(1),s([]))}),[t]);var L=function(){d.fetchImages(t,F).then((function(e){if(s((function(t){return[].concat(Object(j.a)(t),Object(j.a)(e))})),q(),0===e.length)throw new Error("Hmm...Nothing here. Try another search.")})).catch((function(e){p(e),m(k)}))},q=function(){1!==F&&window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})};return b===w?Object(c.jsx)("div",{style:{textAlign:"center"},children:"Please enter a search term to begin your search..."}):b===S?Object(c.jsx)(h,{}):b===k?Object(c.jsx)(y,{message:x.message}):b===N?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(v,{images:o}),0!==o.length&&Object(c.jsx)(g,{onClick:function(){E((function(e){return e+1}))}})]}):void 0}function I(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)(u,{onSubmit:function(e){a(e)}}),Object(c.jsx)(l.a,{autoClose:3e3}),Object(c.jsx)(C,{query:n})]})}s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(I,{})}),document.getElementById("root"))},5:function(e,t,n){}},[[41,1,2]]]);
//# sourceMappingURL=main.eabc0e0d.chunk.js.map